---
title: 'Relax ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸'
date: '2022-04-02 11:29:59'
category: 'Project'
tags: ['Backend', 'Database']
subtitle: 'Relax í”„ë¡œì íŠ¸'
featuredImgUrl: https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FMZd4E%2FbtrrF6NXR2o%2F5zhUCnuxHWCpmLwo4ar1y0%2Fimg.png
featuredImgAlt: 'PROJECT'
---

**ğŸ’¡ ëª©í‘œ**

**í”„ë¡œì íŠ¸ ê¸°íš**

**ë°±ì—”ë“œ ì œì‘**

**í”„ë¡ íŠ¸ ì œì‘**

**EC2 ë„ì»¤ ë°°í¬.**

---

**âš¡ ê°œìš”**

**âœ”ï¸ ì œì‘ê¸°ê°„** : 2022.11.01 ~ 2021.03.31 (í”„ë¡œì íŠ¸ ê¸°íšë¶€í„° ì´ ê¸°ê°„)

**âœ”ï¸ ê¸°ì—¬ë„** : ë³¸ì¸ 100%

**âœ”ï¸ ì‚¬ìš©ìŠ¤íƒ** : typescript, express, postgresSQL, typeORM, Docker, Webpack

**âœ”ï¸ ì €ì¥ì†Œ**: https://github.com/beardfriend/relax

**âœ”ï¸ í”„ë¡œì íŠ¸ í•œ ì¤„ ì„¤ëª…** : ìš”ê°€ì„ ìƒë‹˜ë“¤ì„ ìœ„í•œ ì±„ìš© ì„œë¹„ìŠ¤ ì œì‘.

**âœ”ï¸ ìƒì„¸ì—…ë¬´** : ì¸ì¦(ì¹´ì¹´ì˜¤, êµ¬ê¸€, ì¼ë°˜), í”„ë¡œí•„(ë“±ë¡, ì—…ë°ì´íŠ¸), ë„ì»¤ ì»¨í…Œì´ë„ˆ ì œì‘, ë¹Œë“œ

---

### ë“¤ì–´ê°€ë©°..

ìŠ¤ìŠ¤ë¡œì—ê²Œ ì§ˆë¬¸ì„ ë˜ì¡ŒìŠµë‹ˆë‹¤.

í˜„ì¬ ì‹¤ë ¥ì— ë¨¸ë¬¼ë©°, ì™„ì„±ì— ì´ˆì ì„ ë‘˜ ê²ƒì¸ê°€?  
ì‹¤ë ¥ì„ í‚¤ì›Œ, ì½”ë“œë¥¼ ë‹¨ë‹¨í•˜ê²Œ ë§Œë“¤ ê²ƒì¸ê°€?  
ì €ì˜ ë‹µì€ í›„ìì˜€ìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ì„ íƒì˜ ë°°ê²½ì—ëŠ”  
<<í•œ ê¶Œìœ¼ë¡œ ëë‚´ëŠ” Node & Express, ì´ë˜ ë¸Œë¼ìš´>>ì˜ êµí›ˆì´ ìˆìŠµë‹ˆë‹¤.

ì €ìëŠ” ì´ë ‡ê²Œ ë§í•©ë‹ˆë‹¤.

> ì–´ë–¤ ì¼ì„ ì²˜ìŒìœ¼ë¡œ ì •í™•íˆ í•˜ë ¤ë©´,  
> ë¹ ë¥´ê³  ê°„í¸í•œ ë°©ë²•ì˜ ë‹¤ì„¯ ë°° ì •ë„ì˜ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.  
> í•˜ì§€ë§Œ ë‘ ë²ˆì§¸ì—ëŠ” ì„¸ ë°° ì •ë„ë¡œ ì¤„ì–´ë“¤ê³ ,  
> ì—´ ë²ˆì„ ë„˜ì–´ê°€ë©´  
> ì¼ì„ ì •í™•íˆ í•´ë„  
> ë¹ ë¥´ê³  ê°„í¸í•œ ë°©ë²•ê³¼  
> ì‹œê°„ ì°¨ì´ê°€ ì—†ì„ ê±°ë‹¤.

í˜„ì¬ì— ë¨¸ë¬¼ë €ë‹¤ë©´,  
ìœ„ì˜ ë‚´ìš©ë„ ëª°ëì„ í„°ì´ë‹ˆ,  
ì„ íƒì—ëŠ” í›„íšŒê°€ ì—†ìŠµë‹ˆë‹¤.

# 1. ê¸°íš

## 1.1. ì„¤ë¬¸ì¡°ì‚¬

ìš”ê°€ë¥¼ ì£¼ì œë¡œ ì •í–ˆê³ ,  
ì‚¬ëŒë“¤ì´ ì •ë§ í•„ìš”ë¡œ í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´,  
ì„¤ë¬¸ì¡°ì‚¬ë¥¼ í†µí•´ ë‹ˆì¦ˆë¥¼ íŒŒì•…í–ˆìŠµë‹ˆë‹¤.

![ì„¤ë¬¸ì§€](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FEroKG%2Fbtrx30OMaix%2Fk8y7MKhvy7yAp4zpN7l8mK%2Fimg.png)
_ì„¤ë¬¸ì§€ ì¼ë¶€._

<br>

## 1.2. ì„œë¹„ìŠ¤ ì£¼ì œ ê²°ì •

ê¸´ íšŒì˜ ëì—, ì±„ìš©ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. ìš”ê°€ì—…ê³„ êµ¬ì¸êµ¬ì§ì˜ 80%ê°€ ì»¤ë®¤ë‹ˆí‹° ì‚¬ì´íŠ¸ì—ì„œ ì´ë¤„ì§„ë‹¤. (ì„¤ë¬¸ê²°ê³¼).
2. ì ìœ ìœ¨ ë†’ì€ ì»¤ë®¤ë‹ˆí‹° ì‚¬ì´íŠ¸ê°€ ë¶ˆí¸í•œ ì ì´ ë§ì•˜ë‹¤.
3. í˜„ì¬ íŒ€ì›ìœ¼ë¡œ ì¶©ë¶„íˆ ë¶ˆí¸í•œ ì ì„ ê°œì„ í•  ìˆ˜ ìˆë‹¤.

## 1.3. íŒ€ì› í•´ì²´.

ê°ìì˜ ì´ìœ ë¡œ íŒ€ì€ í•´ì²´ëìŠµë‹ˆë‹¤.  
ìŠ¬íì§€ë§Œ,  
ë•ë¶„ì— ë°±ì—”ë“œ ê°œë°œì„ ì‹œì‘í•˜ê²Œ ë˜ì–´ ê¸°ì©ë‹ˆë‹¤.

**âœ”ï¸ì œì‘ íˆ´** : Figma

**âœ”ï¸ê¸°ì—¬ë„** : 100%

**âœ”ï¸ê¸°íšì„œ ë§í¬** : [í´ë¦­](https://www.figma.com/file/5V4gk9XsHaadTrILJH9YH4/Relax?node-id=0%3A1)

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcMi3pe%2Fbtrx0VfTkUd%2FUE688VzHj3bKKneu5jAcE1%2Fimg.png)

# 2. ë°±ì—”ë“œ ì œì‘

## 2.1. ì´ˆê¸°ì„¤ì •

### 2.1.1. ë””ë ‰í„°ë¦¬ êµ¬ì¡°

ëª¨ë…¸ë ˆí¬ë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.

ì´ìœ ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. ë°±,í”„ë¡ íŠ¸ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì˜ type ì§€ì •ì„ í•œ ë²ˆë§Œ í•´ë„ ë©ë‹ˆë‹¤.
2. í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì‘ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„± ëª¨ë“ˆ í¬ê¸°ì— ëŒ€í•œ ë¶€ë‹´ì´ ì—†ìŠµë‹ˆë‹¤.
3. í˜¼ì ì‘ì—…í•˜ê¸°ì— í¸ë¦¬í•©ë‹ˆë‹¤.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fdmc1ql%2Fbtrx6ZnEryf%2F2kJhxC7wB2zYHERgK3cZck%2Fimg.png)

libs: appsì—ì„œ ì¬ì‚¬ìš©ë˜ëŠ” ì½”ë“œë¥¼ ëª¨ì•„ë†¨ìŠµë‹ˆë‹¤.

MVCëŠ” íŒŒì¼ì„ ìˆ˜ì •, ìƒì„±í•  ë•Œ ë¶ˆí¸í•˜ë‹¤ê³  ëŠê»´ì§‘ë‹ˆë‹¤.  
Nest.jsê°€ ì‚¬ìš©í•˜ëŠ” Domain Driven Designì„ ì‚¬ìš©í•´ë³´ê³  ì‹¶ì–´ì¡ŒìŠµë‹ˆë‹¤.

```json
{
  "service": {
    "prefix": "service",
    "body": [
      "/* ***************",
      " * Find *",
      " *************** */",
      "export function main(){console.log('hello')}",
      "export function test(){console.log('hello')}",
      "\n",
      "/* ***************",
      " * Create *",
      " *************** */",
      "\n",
      "/* ***************",
      " * Update *",
      " *************** */",
      "\n",
      "/* ***************",
      " * Delete *",
      " *************** */",
      "\n",
      "/* ***************",
      " * Middle Logic *",
      " *************** */",
      "\n",
      "/* ***************",
      " * Final Logic *",
      " *************** */"
    ]
  },

  "controller": {
    "prefix": "controller",
    "body": [
      "import { Request, Response } from 'express';",
      "export default async function $TM_FILENAME_BASE (req:Request, res:Response) {res.send('hello')}"
    ]
  }
}
```

ì €ëŠ” ì˜ë¯¸ì—†ëŠ” ë°˜ë³µì‘ì—…ì„ ì‹«ì–´í•©ë‹ˆë‹¤.  
ì‹œê°„ì´ ê±¸ë¦¬ë”ë¼ë„ í¸í•œ ë°©ë²•ì„ ì°¾ì•„ë‚´ëŠ” í¸ì…ë‹ˆë‹¤.

íŒŒì¼ ìƒì„±í•  ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” ê±´ ì–´ë ¤ìš´ ì¼ì…ë‹ˆë‹¤.  
ìì£¼ ì‚¬ìš©í•˜ëŠ” Controller, ServiceíŒŒì¼ì— ëŒ€í•´ì„œëŠ”  
UserSnippetì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.

### 2.1.2. ESLint, Prettier

```json
{
  "extends": ["airbnb-base", "airbnb-typescript/base", "../../.eslintrc"],
  "parserOptions": {
    "project": "**/tsconfig.json"
  },
  "ignorePatterns": "*.js",
  "rules": {
    "import/no-extraneous-dependencies": "off",
    "class-methods-use-this": "off"
  }
}
```

íŒ€ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì½”ë”© ìŠ¤íƒ€ì¼ì´ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.

AirBnb ê·œê²©ì€ ê½¤ ê¹Œë‹¤ë¡­ìŠµë‹ˆë‹¤.  
ê°€ì´ë“œì— ë¬´ì¡°ê±´ ë§ì¶°ì„œ ê°€ë‹¤ë³´ë‹ˆ  
ê³µë¶€ê°€ ë§ì´ ëìŠµë‹ˆë‹¤.

### 2.1.3. TSconfig

ë‚˜ë¦„ ê¹Œë‹¤ë¡­ê²Œ ì»´íŒŒì¼ì„¤ì •ì„ í–ˆìŠµë‹ˆë‹¤.  
ë•ë¶„ì— ì˜ˆì¸¡ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•  ê²ƒì¸ì§€  
ì˜ë„ë¥¼ ì–´ë–»ê²Œ í‘œí˜„í•  ê²ƒì¸ì§€ë¥¼ ê¹Šì´ ê³ ë¯¼í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

```json
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
```

ì ˆëŒ€ê²½ë¡œë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```json
      "@SH/Initializations/*": ["./apps/server-hire/src/initialzations/*"],
      "@SH/Entities/*": ["./apps/server-hire/src/entities/*"],
      "@SH/Controllers/*": ["./apps/server-hire/src/controllers/*"],
      "@SH/Services/*": ["./apps/server-hire/src/services/*"],
      "@SH/Routers/*": ["./apps/server-hire/src/routers/*"],
      "@SH/MiddleWares/*": ["./apps/server-hire/src/middlewares/*"],
      "@Libs/*": ["./libs/*"],
      "@Constants/Types": ["./libs/constants/types/index.ts"],
      "@Constants/Messages": ["libs/constants/messages/index.ts"]
```

### 2.1.4. env

process.envë¥¼ ì¡°íšŒí•˜ë©´, **undefined or ì„¤ì •ëœ ê°’**ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.  
serviceì—ì„œ env ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³  ì‹¶ë‹¤ë©´ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.  
envê°’ ì¡°íšŒëŠ” ìˆ˜ì‹­ë²ˆ ì´ë¤„ì§‘ë‹ˆë‹¤.  
ë”°ë¼ì„œ ì¡°íšŒí•  ë•Œë§ˆë‹¤ ì˜ˆì™¸ì²˜ë¦¬í•œë‹¤ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.

getOsEnví•¨ìˆ˜ì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ê³   
envê°’ì„ ì„ ì–¸í•¨ìœ¼ë¡œì¨  
ì¡°íšŒ ì‹œ undefinedê°€ ì•ˆ ë‚˜ì˜¤ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```typescript
useDotEnv();

const env = {
  port: toNumber(getOsEnv('EXPRESS_PORT')),
  typeorm: {
    connection: getOsEnv('TYPEORM_CONNECTION'),
    host: getOsEnv('TYPEORM_HOST'),
    port: toNumber(getOsEnv('TYPEORM_PORT')),
    username: getOsEnv('TYPEORM_USERNAME'),
    password: getOsEnv('TYPEORM_PASSWORD'),
    database: getOsEnv('TYPEORM_DATABASE'),
    sync: toBool(getOsEnv('TYPEORM_SYNCHRONIZE')),
    logging: toBool(getOsEnv('TYPEORM_LOGGING')),
    entities: getOsEnv('TYPEORM_ENTITIES'),
    migration: getOsEnv('TYPEORM_MIGRATION'),
  },
  jwt: getOsEnv('JWT'),

  google: {
    key: getOsEnv('GOOGLE_KEY'),
    password: getOsEnv('GOOGLE_PASS'),
    redirect_uri: getOsEnv('GOOGLE_REDIRECT_URI'),
    finish_uri: getOsEnv('GOOGLE_FINISH_URI'),
  },
  kakao: {
    key: getOsEnv('KAKAO_KEY'),
    redirect_uri: getOsEnv('KAKAO_REDIRECT_URI'),
    finish_uri: getOsEnv('KAKAO_FINISH_URI'),
  },
  api: {
    business_check: getOsEnv('OPEN_API_KEY'),
  },
};
```

### 2.1.5 typeorm Config

ë°±ì—”ë“œì½”ë“œëŠ” camelCaseë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
typeORMì—ì„œ ì—”í‹°í‹°ë¥¼ ë™ê¸°í™”í•˜ë©´  
ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¬ëŸ¼ëª…ì€ ë°±ì—”ë“œì½”ë“œ ì†ì„±ëª…ì„ ë”°ë¼ê°‘ë‹ˆë‹¤.  
camelCaseë¥¼ ì‚¬ìš©í•œë‹¤ë©´, Databaseì˜ ì»¬ëŸ¼ ëª…ë„ camelCaseë¡œ ì‘ì„±ë˜ëŠ” ê²ƒì´ì£ 

DBì˜ ì»¬ëŸ¼ì´ë¦„ì´ camelCaseë¼ë©´  
ì¿¼ë¦¬ë¬¸ì„ ì‘ì„±í•  ë•Œ ì»¬ëŸ¼ ëª…ì„ ""ì•ˆì— ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.  
""ê°€ ì¿¼ë¦¬ë¬¸ ê°€ë…ì„±ì„ í•´ì¹©ë‹ˆë‹¤.

ë•Œë¬¸ì— DBì—ì„œëŠ” snakeNamingStrategyë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°,  
ë‹¤í–‰íˆë„ typeORMì—ì„œ ë„¤ì´ë° ì „ëµì„ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ë†¨ìŠµë‹ˆë‹¤.

snakeCaseë¡œ ë³€ê²½í•´ì£¼ëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬  
ì½”ë“œ ì†ì„± ì´ë¦„ì€ camelCase , DBì—ëŠ” snakeCaseë¥¼ ìœ ì§€í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

```typescript
export default {
  type: 'postgres',
  host: env.typeorm.host,
  port: env.typeorm.port,
  username: env.typeorm.username,
  password: env.typeorm.password,
  database: env.typeorm.database,
  synchronize: env.typeorm.sync,
  logging: env.typeorm.logging,
  entities: Entites,
  migrations: [env.typeorm.migration],
  cli: {
    migrationsDir: 'src/migrations',
  },
  namingStrategy: new SnakeNamingStrategy(),
} as ConnectionOptions;
```

## 2.2. Database

### 2.2.1 Entities

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FBuDrq%2FbtrydyXWLzr%2Fdss5HnKA6rHMGW7iTBAVN1%2Ftfile.svg)
_typeORM UML ëª¨ë“ˆë¡œ ì¶”ì¶œí•œ ERD_

ìœ ì € íƒ€ì…ì´ 2ê°œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.  
ì„ ìƒë‹˜ê³¼ í•™ì›ì‚¬ì—…ìì…ë‹ˆë‹¤.  
EntityëŠ” User,Academy,Teacher ì´ 3ê°œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.  
User:Acadmey, User:Teacher ë¥¼ 1:1 ê´€ê³„ì§€ì—ˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ í•œ ì´ìœ ëŠ”, íšŒì›ê°€ì… í”„ë¡œì„¸ìŠ¤ ë•Œë¬¸ì— ê·¸ë ‡ìŠµë‹ˆë‹¤.  
íšŒì›ê°€ì…ì´í›„ íšŒì›ìœ í˜•ì„ íƒì´ ì´ë¤„ì§€ëŠ”ë°,

ë§Œì•½ Entityê°€ Academy,Teacher ë‘ ê°œë¼ë©´  
íšŒì›ê°€ì… ì´í›„ íšŒì›ìœ í˜•ì„ ì„ íƒí•˜ì§€ ì•ŠëŠ” íšŒì›ì— ëŒ€í•´ì„œëŠ”  
íšŒì›ê°€ì… ì •ë³´ ì €ì¥ì´ ê¹Œë‹¤ë¡­ê¸° ë•Œë¬¸ì—  
User Entityë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

**ì •ê·œí™”**

ì •ê·œí™” ë‹¨ê³„ê°€ ê¹Šì–´ì§ˆìˆ˜ë¡ Joinì´ ë§ì•„ì§‘ë‹ˆë‹¤.  
ìƒí™©ì— ë”°ë¼ ì •ê·œí™”ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.

ì•„ì§ì€ íŒë‹¨í•  ê¸°ì¤€ì´ ì„œì§€ ì•Šì•„, ì§ì ‘ í…ŒìŠ¤íŠ¸ë¥¼ í–ˆìŠµë‹ˆë‹¤.  
ì •ê·œí™” í–ˆì„ ë•Œ vs í•˜ì§€ ì•Šì•˜ì„ ë•Œ

ë‘ ìƒí™© ëª¨ë‘, ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ë¬¸ì„ ë‚ ë ¤ë´¤ìŠµë‹ˆë‹¤.
Databaseì˜ EXPLAIN ê¸°ëŠ¥ì„ ì´ìš©í•˜ê¸°ë„ í–ˆê³ ,  
jestì—ì„œ Dummyë°ì´í„°ë¥¼ ì‚½ì…í•˜ì—¬ ì†ë„ë¥¼ ë¹„êµí•´ë³´ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.

```plaintext
/*
    @ê²°ê³¼
      ìš”ê°€ì¢…ë¥˜ë¥¼ ê´€ê³„í˜•ìœ¼ë¡œ ë¹¼ê¸° vs ë°°ì—´ë¡œ ê° í…Œì´ë¸”ì— ë°°ì¹˜
    í”„ë¡œí•„ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
      âœ“ CASE A (28 ms)
      âœ“ CASE B (5 ms)
      âœ“ CASE B 1000ê°œ í…ŒìŠ¤íŠ¸ no join (4 ms)
      âœ“ CASE B 1000ê°œ í…ŒìŠ¤íŠ¸ join (4 ms)
    ì„ ìƒë‹˜ê³¼ í•™ì› ìš”ê°€ ì¢…ë¥˜ ê°™ì€ ê²ƒ ë½‘ì•„ë‚´ê¸°
      âœ“ CASE A (31 ms)
      âœ“ CASE B (18 ms)
*/
```

2ì°¨ ì •ê·œí™”ê¹Œì§€ëŠ” ì ìš©í–ˆìŠµë‹ˆë‹¤.

**DTO**

class-transformerë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.  
validation ì²´í¬ë¥¼ ì›í–ˆìŠµë‹ˆë‹¤.

class-transfomer ë°ì½”ë ˆì´ì…˜ì„ typeORM ë°ì½”ë ˆì´ì…˜ê³¼  
EntityíŒŒì¼ì— í•¨ê»˜ ì‘ì„±í•˜ëŠ” ê±´ ë¶€ì í•©í•˜ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.  
ì½”ë“œê°€ ë³µì¡í•´ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

Springì˜ ê°œë…ê³¼ëŠ” ì •í™•íˆ ë™ì¼í•˜ì§€ ì•Šì§€ë§Œ,  
ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ê²ƒ ê°™ì•„ DTOë¼ ëª…ì¹­í–ˆìŠµë‹ˆë‹¤.

```typescript
@Entity()
class Academy extends AcademyDto implements UpdateColumn {
  @PrimaryColumn()
  id: number;

  @OneToOne(() => User)
  @JoinColumn({ name: 'id' })
  user: User;

  @OneToMany(() => Recruitement, (recruitement) => recruitement.writer)
  recruitement: Recruitement[];

  @OneToOne(() => AcademyBusiness)
  @JoinColumn()
  businessInfo: AcademyBusiness;

  @OneToOne(() => AcademyProfile)
  @JoinColumn()
  academyProfile: AcademyProfile;
}
```

ìµœì¢…ì ìœ¼ë¡œ Academyì— UpdateColumnì´ ìƒì†ë˜ëŠ”ë°,  
implementsì— ì§ê´€ì ìœ¼ë¡œ ì–´ë–¤ ê²ƒë“¤ì´ ìƒì†ë˜ëŠ”ì§€ í‘œê¸°í–ˆìŠµë‹ˆë‹¤.

interfaceë¥¼ ìƒì†ë°›ëŠ” implementsì˜ ë³¸ì§ˆì—ì„œ ë²—ì–´ë‚˜ê¸° ë•Œë¬¸ì—  
ì£¼ì„ì´ ì—†ìœ¼ë©´ ì´í•´í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì¢‹ì€ ì½”ë“œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

class ì•ˆì— Object.assignì„ í†µí•´ ê²°í•©í•˜ëŠ” ë°©ë²•ë„ ìƒê°í•´ë´¤ì§€ë§Œ  
ì´ì— ëŒ€í•œ ì‹¤í—˜ì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤.  
ì´ ë¶€ë¶„ì€ ì¢€ ë” ê³ ë¯¼ì„ í•´ë³´ê³  ì¢‹ì€ ë°©ë²•ì„ ì°¾ì•„ë´ì•¼ê² ìŠµë‹ˆë‹¤.

### 2.2.2. Seeding

E2Eí…ŒìŠ¤íŠ¸ë¥¼ ë§ˆì¹œ ë’¤, í”„ë¡ íŠ¸ì—”ë“œì— ê°œë°œì„œë²„ë¥¼ ì œê³µí•  ë•Œ  
Dummyë°ì´í„°ë¥¼ ì œê³µí•œë‹¤ë©´, í”„ë¡ íŠ¸ê°œë°œìëŠ” ì¢€ ë” í¸ë¦¬í•©ë‹ˆë‹¤.

typeORM CLIë¥¼ ì‚¬ìš©í•˜ì—¬,  
Dummyë°ì´í„°ë¥¼ ì‹¬ì—ˆìŠµë‹ˆë‹¤.

ì•„ë˜ëŠ” ì½”ë“œ ìƒ˜í”Œì…ë‹ˆë‹¤.

```typescript
class Seed1643011552762 implements MigrationInterface {
  public async up(): Promise<void> {
    const value: {}[] = [];
    for (let i = 0; i < 100; i += 1) {
      const test = {
        email: casual.email,
        password: casual.password,
        phone_number: casual.phone,
      };
      value.push(test);
    }
    if (value.length === 0) {
      return;
    }
    await getConnection().createQueryBuilder().insert().into(User).values(value).execute();
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`truncate table public.user cascade;`);
  }
}
```

## 2.3. Business Logic

ì¤‘ìš”í•œ ë¶€ë¶„ë§Œ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

### 2.3.1. Auth

Passportë¥¼ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ,  
ê³µë¶€í•˜ë©° ì§ì ‘ í•´ë³´ê³  ì‹¶ì€ ë§ˆìŒì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

cookieë¥¼ ë°›ì•„ì„œ 3ê°€ì§€ ì¿ í‚¤ê°€ ì—†ì„ ë–„, ì¹´ì¹´ì˜¤ì¼ ë•Œ, êµ¬ê¸€orì¼ë°˜ë¡œê·¸ì¸ì¼ ë•Œ,  
3ê°€ì§€ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ìƒíƒœë¥¼ ë˜ì ¸ì£¼ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

```typescript
export async function loginCheckMiddleWare(req: Request, res: Response, next: NextFunction) {
  async function setReqeustUserInfo(accessToken: string) {
    const [type, user] = await setUserInfo(accessToken);
    req.type = type;
    req.user = user;
  }

  const cookies = req.headers.cookie;
  const [status, refreshAccessToken] = loginStatusFunc(cookies);

  try {
    if (status === 'loginFail' || refreshAccessToken === undefined) {
      return res
        .status(redirectLoginPage.statusCode)
        .send({ msg: redirectLoginPage.message, category: redirectLoginPage.category });
    }

    if (status === 'getKakaoAccess') {
      const refreshToken = refreshAccessToken;
      const { accessTokenInfo, refreshToeknInfo } = await getSignedAccessRefreshToken(refreshToken);

      res.cookie(token.LOGIN, accessTokenInfo.signedAccessToken, {
        maxAge: accessTokenInfo.expiresIn * 1000,
        httpOnly: true,
      });

      if (refreshToeknInfo !== undefined) {
        res.cookie(token.RefreshKakao, refreshToeknInfo.signedRefreshToken, {
          maxAge: refreshToeknInfo.refreshExpiresIn * 1000,
          httpOnly: true,
        });
      }

      await setReqeustUserInfo(accessTokenInfo.signedAccessToken);
    }

    if (status === 'loginSuccess') {
      const accessToken = refreshAccessToken;
      await setReqeustUserInfo(accessToken);
    }

    return next();
  } catch (error) {
    return res.status(serverError.statusCode).send({ msg: serverError.message, category: serverError.category });
  }
}
```

### 2.3.2. KaKao Auth

ì¹´ì¹´ì˜¤ REST APIë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
getCode -> getToken

```typescript
export async function getCode(req: Request, res: Response) {
  const cookies = req.headers.cookie;

  const refreshToken = checkRefreshToken(cookies);

  if (!refreshToken) {
    const url = await getKakaoRedirectUrl();
    return res.redirect(url);
  }

  const { accessTokenInfo, refreshToeknInfo } = await getSignedAccessRefreshToken(refreshToken);

  res.cookie(token.LOGIN, accessTokenInfo.signedAccessToken, {
    maxAge: accessTokenInfo.expiresIn * 1000,
    httpOnly: true,
  });

  if (refreshToeknInfo !== undefined) {
    res.cookie(token.RefreshKakao, refreshToeknInfo.signedRefreshToken, {
      maxAge: refreshToeknInfo.refreshExpiresIn * 1000,
      httpOnly: true,
    });
  }

  return res.redirect(env.kakao.finish_uri);
}

export async function getToken(req: Request, res: Response) {
  if (req.query.code === undefined) {
    return res
      .status(kakaoCodeNotFound.statusCode)
      .send({ msg: kakaoCodeNotFound.message, category: kakaoCodeNotFound.category });
  }

  const { accessTokenInfo, refreshTokenInfo } = await getkakaoTokenData(req.query.code as string);

  const userId = await getKakaoUserId(accessTokenInfo.accessToken);

  const isAlreadyKakaoUser = await checkKakaoUser(userId);

  if (!isAlreadyKakaoUser) {
    await createKakaoUser(userId);
  }

  const { signedAccessToken, signedRefreshToken } = await getSignedAccessRefreshTokenKaKao(userId, {
    accessTokenInfo,
    refreshTokenInfo,
  });

  res.cookie(token.LOGIN, signedAccessToken, { maxAge: accessTokenInfo.expiresIn, httpOnly: true });
  res.cookie(token.RefreshKakao, signedRefreshToken, { maxAge: refreshTokenInfo.refreshToken, httpOnly: true });

  return res.redirect(env.kakao.finish_uri);
}
```

### 2.3.2. Profile

formDataë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€íŒŒì¼ë“¤ê³¼ í…ìŠ¤íŠ¸ë¥¼ ë°›ìŠµë‹ˆë‹¤.  
í•œ ë²ˆì— ë°›ëŠ” ì´ìœ ëŠ”, í”„ë¡œí•„ ë“±ë¡, ìˆ˜ì •ì´ ê²Œì‹œê¸€ì„ ë“±ë¡, ìˆ˜ì •í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ  
UIë¥¼ ì§€ë…”ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

Controller -> Service ( FinalLogic -> MiddleLogic -> [CREATE,FIND,UPDATE,DELETE] ) íë¦„ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

```typescript
// controller
export default async function putAcademyProfile(req: Request, res: Response) {
  const images = req.files as Iimages;

  const profileData = Object.assign(req.body, images) as IacademyProfileRequest;
  const loginData = { uniqueKey: req.user, loginType: req.type };

  const findedProfile = await findAcademyProfileId(loginData);

  if (findedProfile === undefined) {
    await createAcademyProfile(profileData, loginData);
    return res
      .status(createProfileSuccess.statusCode)
      .send({ msg: createProfileSuccess.message, category: createProfileSuccess.category });
  }

  await updateAcademyProfile(profileData, loginData);
  return res
    .status(updateProfileSuccess.statusCode)
    .send({ msg: updateProfileSuccess.message, category: updateProfileSuccess.category });
}
```

```typescript
// service ì¼ë¶€ë¶„...

/* ***************
 * Update  *
 *************** */

export async function updateLogo(id: number | undefined, data: image.data) {
  const manager = getManager();
  await manager.update(Images, { id }, { ...data });
}

/* ***************
 * Middle Logic *
 *************** */

export async function updateYogaList(
  newYogaList: string[] | string | undefined,
  beforeYogaList: DeepPartial<Yoga>[],
  profile: DeepPartial<AcademyProfile> | DeepPartial<TeacherProfile>
) {
  let yogaList = newYogaList;
  if (typeof yogaList === 'string') {
    yogaList = [yogaList];
  }

  if (yogaList === undefined) {
    await deleteYogaALL(profile);
    return;
  }

  const beforeList: string[] = [];

  const Deletelist = beforeYogaList.filter((yoga) => {
    if (yoga.name === undefined || yogaList === undefined) {
      return undefined;
    }
    const yoganame = switchYogaTypeReverse(yoga.name) as string;
    beforeList.push(yoganame);
    return !yogaList.includes(yoganame);
  });

  const updateList = yogaList.filter((data) => {
    return !beforeList.includes(data);
  });

  Deletelist.map(async (data) => {
    if (data.id === undefined) {
      return;
    }
    await deleteYoga(data.id);
  });
  await createYogaList(updateList, profile);
}

export async function updateLogoIntroudceImage(
  images: { [fieldname: string]: Express.Multer.File[] },
  isDeleteLogo: string | undefined,
  academyProfile: DeepPartial<AcademyProfile>
): Promise<void> {
  const { ACADEMY_LOGO, ACADEMY_INTRODUCE } = images;

  const isLogo = ACADEMY_LOGO === undefined ? 'No' : 'Yes';
  const isIntroduce = ACADEMY_INTRODUCE === undefined ? 'No' : 'Yes';

  if (isLogo === 'Yes' && isIntroduce === 'Yes') {
    await updateIntroduceLogic(ACADEMY_INTRODUCE, academyProfile);
    await updateLogoLogic(ACADEMY_LOGO, academyProfile);
  }
  if (isLogo === 'No' && isIntroduce === 'Yes') {
    await updateIntroduceLogic(ACADEMY_INTRODUCE, academyProfile);
  }
  if (isLogo === 'Yes' && isIntroduce === 'No') {
    await updateLogoLogic(ACADEMY_LOGO, academyProfile);
  }
  if (isLogo === 'No' && isIntroduce === 'No') {
    if (isDeleteLogo === 'true') {
      await deleteLogoImage(academyProfile);
    }
  }
}

/* ***************
 * Final Logic *
 *************** */

export async function updateAcademyProfile(data: IacademyProfileRequest, loginData: IloginData): Promise<void> {
  const { uniqueKey, loginType } = loginData;
  const { ACADEMY_INTRODUCE, ACADEMY_LOGO, academyName, representationNumber, introduce, yoga, isDeleteLogo } = data;
  const { region1Depth, region2Depth, region3Depth, roadName, mainBuildingNo, subBuildingNo } = data;
  const address = { region1Depth, region2Depth, region3Depth, roadName, mainBuildingNo, subBuildingNo };
  const imagesData = { ACADEMY_INTRODUCE, ACADEMY_LOGO };
  const findedProfileAllInfo = await findAcademyProfile(uniqueKey, loginType);

  const profile = findedProfileAllInfo.academy.academyProfile;
  await updateAddress(profile, address);
  await updateYogaList(yoga, profile.yoga, profile);
  await updateLogoIntroudceImage(imagesData, isDeleteLogo, profile);
  await updateProfile(profile, { academyName, representationNumber, introduce });
}
```

## 2.4. Test

### 2.4.1. Jest

jestë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

testë¥¼ í•˜ë©° ì˜¤ë¥˜ë¥¼ ì •ë§ ë§ì´ ì¡ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.  
í”„ë¡œê·¸ë˜ë°ì€ ì§€ì†ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ê²€ì¦ì„ í•´ë‚˜ê°€ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

jestì˜ ì¥ì ì€ í…ŒìŠ¤íŠ¸ì½”ë“œê°€ ë‚¨ëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.  
ê·¸ë ‡ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ê²€ì¦ê³¼ì •ê³¼ ê²°ê³¼ê°€ ëª…í™•í•©ë‹ˆë‹¤.

```typescript
describe('ì„ ìƒë‹˜ í”„ë¡œí•„', () => {
  beforeAll(async () => {
    await createConnection({
      type: 'postgres',
      host: env.typeorm.host,
      port: env.typeorm.port,
      username: env.typeorm.username,
      password: env.typeorm.password,
      database: env.typeorm.database,
      synchronize: env.typeorm.sync,
      logging: env.typeorm.logging,
      entities: [env.typeorm.entities],
    });
  });

  const app = initExpress();
  const agent = request.agent(app);
  describe('POST /auth/signup', () => {
    it('ì¼ë°˜ìœ ì € íšŒì›ê°€ì… ë° í† í° ë˜ì§€ê¸°', async () => {
      const res = await agent.post('/auth/signup').send({ email: 'asd@naver.com', password: 'password' });
      expect(res.statusCode).toEqual(200);
    });
  });
  describe('POST /role', () => {
    it('í•™ì› ìœ í˜• ì„ íƒ', async () => {
      const res = await agent.post('/role').send({ role: 'TEACHER' });
      expect(res.statusCode).toEqual(200);
    });
  });

  describe('PUT /profile/teacher', () => {
    it('ì „ì²´ í”„ë¡œí•„ ë“±ë¡', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'name')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323')
        .field('yoga', 'IYENGAR')
        .field('yoga', 'HATA')
        .attach('TEACHER_PROFILE', './tests/public/logo.png');
      expect(res.statusCode).toEqual(201);
    });

    it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ìš”ê°€ë¦¬ìŠ¤íŠ¸ Delete All', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'academyName')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323');
      expect(res.statusCode).toEqual(201);
      const profile = await findTeacherProfile({ uniqueKey: 'asd@naver.com', loginType: 'normal' });
      expect(profile.teacher.teacherProfile.yoga.length).toBe(0);
    });

    it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ìš”ê°€ 1ê°œ Update', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'name')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323')
        .field('yoga', 'IYENGAR');
      expect(res.statusCode).toEqual(201);
      const profile = await findTeacherProfile({ uniqueKey: 'asd@naver.com', loginType: 'normal' });
      expect(profile.teacher.teacherProfile.yoga.length).toBe(1);
    });

    it('í”„ë¡œí•„ ì´ë¯¸ì§€ ì§€ìš°ê¸°', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'name')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323')
        .field('yoga', 'IYENGAR')
        .field('isDeleteProfileImage', 'true');
      expect(res.statusCode).toEqual(201);

      const profile = await findTeacherProfile({ uniqueKey: 'asd@naver.com', loginType: 'normal' });
      expect(profile.teacher.teacherProfile.profileImage).toBeNull();
    });

    it('í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'name')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323')
        .field('yoga', 'IYENGAR')
        .attach('TEACHER_PROFILE', './tests/public/logo.png');
      expect(res.statusCode).toEqual(201);

      const profile = await findTeacherProfile({ uniqueKey: 'asd@naver.com', loginType: 'normal' });
      expect(profile.teacher.teacherProfile.profileImage).not.toBeNull();
    });

    it('ê¸°ë³¸ì •ë³´ ì—…ë°ì´íŠ¸', async () => {
      const res = await agent
        .put('/profile/teacher')
        .field('name', 'fff')
        .field('introduce', 'introduce')
        .field('instagram', '0123232323')
        .field('yoga', 'IYENGAR');
      expect(res.statusCode).toEqual(201);

      const profile = await findTeacherProfile({ uniqueKey: 'asd@naver.com', loginType: 'normal' });
      expect(profile.teacher.teacherProfile.name).toEqual('fff');
    });

    afterAll(async () => {
      const manager = getManager();
      await manager.query(`
      DO $$ DECLARE
      r RECORD;
  BEGIN
      FOR r IN (SELECT tablename FROM pg_tables WHERE schemaname = current_schema()) LOOP
          EXECUTE 'DROP TABLE IF EXISTS ' || quote_ident(r.tablename) || ' CASCADE';
      END LOOP;
  END $$;
      `);
    });
  });
});
```

## 2.5. Deploy

### 2.5.1. Build

ì„¸ ê°€ì§€ ì •ë„ë¥¼ ì„ íƒí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

- ts-node
- tsc
- webpack

**ts-node**

ts-nodeë¥¼ ë§Œë“  ì‚¬ëŒì¸ Blake Embreyì— ë”°ë¥´ë©´,

> --transpile-only  
> ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤ë©´, production ëª¨ë“œì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.  
> ë‹¤ë§Œ, reflect-metadata(ë°ì½”ë ˆì´í„°ë¥¼ ìœ„í•œ ì‹¤í—˜ì  ì§€ì›)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°  
> tscë¡œ ë¹Œë“œ í›„ nodeì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê±¸ ê¶Œì¥í•œë‹¤.

ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” reflect-metadataë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—  
ts-nodeë¥¼ ì„ íƒí•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.

ë˜í•œ ê°œë°œí•  ë•Œ ts-node-devë¥¼ ì‚¬ìš©í–ˆëŠ”ë°  
â€œheap out of memoryâ€ì—ëŸ¬ ë©”ì„¸ì§€ì™€ í•¨ê»˜ ì¢…ì¢… ì„œë²„ê°€ ë‹¤ìš´ëìŠµë‹ˆë‹¤.  
ts-nodeë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  ì´ìœ ê°€ ë”ìš± ë¶„ëª…í•´ì¡ŒìŠµë‹ˆë‹¤.

**tsc**

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì ˆëŒ€ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
tscëŠ” ë¹Œë“œ ì´í›„ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ”  
ì ˆëŒ€ê²½ë¡œì— ëŒ€í•œ ëª…ì‹œê°€ í•„ìš”í•©ë‹ˆë‹¤.

tsconfig-pathsë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜. tsconfigíŒŒì¼ ì„¤ì •ì— ì ˆëŒ€ ê²½ë¡œ ë§¨ ì•ì— distë¥¼ ë„£ì–´ì¤˜ë„ ë©ë‹ˆë‹¤.

**webpack**

ì›¹í™ì€ ì„¤ì • íŒŒì¼ì— ì ˆëŒ€ê²½ë¡œë¥¼ ëª…ì‹œí•˜ê¸° ë•Œë¬¸ì—,  
ê·¸ëƒ¥ ë°”ë¡œ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.  
ë‹¤ë§Œ minimizeë¥¼ í•  ê²½ìš° DBì»¬ëŸ¼ ì´ë¦„ì´ ë°”ë€Œê¸° ë–„ë¬¸ì—  
minimizeëŠ” ì„ íƒí•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.

<br>

ì €ëŠ” webpackì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.  
ts-loaderë¥¼ ì‚¬ìš©í•˜ë©´ tscì— ë¹„í•´ ë¹Œë“œ ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆëŠ”ë°  
í˜„ì¬ëŠ” ë¶ˆí¸í•¨ì„ ëª» ëŠë¼ê³  ìˆê³ ,

babel-loaderëŠ” ì†ë„ê°€ ë¹ ë¥´ê¸°ì—,  
webpackì„ ì„ íƒí•  ì´ìœ ê°€ ë¶„ëª…í•´ì¡ŒìŠµë‹ˆë‹¤.

### 2.5.2. Execute

**pm2**
pm2-runtimeì„ ì´ìš©í•©ë‹ˆë‹¤.

### 2.5.3. Server

AWS (EC2) Ubuntu - Nginx -Docker (Database, Server)

### 2.5.4. Deploy

aws ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ ì´í›„  
ë„ì»¤ë¥¼ ì„¤ì¹˜í•˜ê³ , gitì—ì„œ ì½”ë“œë¥¼ ë°›ì€ ë’¤ì—  
ë„ì»¤-composeì „ëµì— ë”°ë¼ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³   
ì‹¤í–‰í•˜ëŠ” ì „ëµì„ íƒí–ˆìŠµë‹ˆë‹¤.

ë§Œì•½
ë³´ì•ˆ ê°•í™”, ë¶€í•˜ ë¶„ì‚°, Cahceë¥¼ ì›í•œë‹¤ë©´  
Nginxë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ê² ìŠµë‹ˆë‹¤.

### ë§ˆë¬´ë¦¬í•˜ë©°..

ì‘ë™í•˜ëŠ” ê±¸ ëˆˆìœ¼ë¡œ ë³´ì§€ ëª»í•œ ê²Œ ì•„ì‰½ìŠµë‹ˆë‹¤.  
ì§€ì†ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸ í•˜ì—¬  
í”„ë¡œì íŠ¸ë¥¼ ë§ˆë¬´ë¦¬ ì§€ì„ ì˜ˆì •ì…ë‹ˆë‹¤.

ë˜í•œ S3ë²„í‚·ì— ì´ë¯¸ì§€ë¥¼ ë‹´ëŠ” ê²ƒë„  
í•˜ì§€ ëª»í•´ ì•„ì‰½ìŠµë‹ˆë‹¤.

ì•„ì§ Docker, ë°°í¬, AWS ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë“¤ì„ ì‚¬ìš©í•¨ì— ìˆì–´  
ì„œíˆ´ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.  
ì¥ë‚œê° ë§Œì§€ë“¯ ê³„ì† ê°–ê³  ë†€ì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

ëìœ¼ë¡œ  
ì¸ìŠ¤í„´ìŠ¤ê°€ 10ê°œ ì´ìƒ ìˆëŠ” í° ê·œëª¨ì˜ í”„ë¡œì íŠ¸ë¥¼ ê²½í—˜í•´ë³´ê³  ì‹¶ìŠµë‹ˆë‹¤.  
ì°í‚¨ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì‘ì„±, ë°°í¬ ìë™í™”, ìë™í™” í…ŒìŠ¤íŠ¸ ì „ëµì„ ì„¸ì›Œë³´ê³  ì‹¶ê³ 
ELKìŠ¤í…ë„ ì‚¬ìš©í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ ì¤‘ê°„ì— ëª…ìƒì„ ë°°ìš°ê¸° ìœ„í•´ ë©€ë¦¬ ë– ë‚˜ê³   
íŒ€ í•´ì²´ë„ ë˜ê³   
í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ì±…ì„ ì‚¬ì„œ ê³µë¶€í•˜ê³   
ì‚¶ì˜ ì˜ë¯¸ë¥¼ ì°¾ìœ¼ë©° ë°©í™©ë„ í•˜ê³   
ì°¸ ë§ì€ ì¼ë“¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

ë‹¤ì–‘í•œ ê³ ë¹„ê°€ ì—†ì—ˆë‹¤ë©´  
ì „íˆ¬ë ¥ì´ ì˜¬ë¼ê°€ì§€ ì•Šì•˜ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ê·€í•œì‹œê°„ì—, ì œ ê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤.
