{"componentChunkName":"component---src-templates-blogpost-tsx","path":"/Development/relax01/","result":{"data":{"markdownRemark":{"html":"<p><strong>ğŸ’¡ëª©í‘œ</strong></p>\n<ul>\n<li>Typeormì—ì„œ DummyData seedì‹¬ê¸°..</li>\n</ul>\n<p><strong>âš¡ ë¬¸ì œ</strong></p>\n<ul>\n<li>Typeormì—ì„  seedë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>ë¯¸êµ­ ìœ ëª… í”„ë¡œê·¸ë˜ë¨¸ Aaron Swartz ì–´ë””ê°??...</li>\n</ul>\n<h1 id=\"1-TypeOrmì—ì„œ-seed-ì •ì±…-ìˆ˜ë¦½\" style=\"position:relative;\">1. TypeOrmì—ì„œ seed ì •ì±… ìˆ˜ë¦½<a href=\"#1-TypeOrm%EC%97%90%EC%84%9C-seed-%EC%A0%95%EC%B1%85-%EC%88%98%EB%A6%BD\" aria-label=\"1 TypeOrmì—ì„œ seed ì •ì±… ìˆ˜ë¦½ permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>ORMì˜ ê°•ì Sequelizeì—ì„œëŠ” Seedë¥¼ ìœ„í•œ BulkInsertí•¨ìˆ˜ë¥¼ ì§€ì›í•œë‹¤.<br>\nTypeOrmì—ì„œëŠ” BulkInsertë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë”ë¯¸ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê¸° ìœ„í•´<br>\nì§ì ‘ í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤.</p>\n<ol>\n<li>ì§ì ‘ SQLë¬¸ì„ ì‘ì„±í•´ì¤€ë‹¤.</li>\n<li>TypeOrmì˜ ë‚´ì¥ëœ ê¸°ëŠ¥ QueryBuilderë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n</ol>\n<p>ë‘ ê°€ì§€ ë°©ë²• ì¤‘ ë‚˜ëŠ” ë‘ ë²ˆì§¸ ë°©ë²•ì„ íƒí–ˆë‹¤.</p>\n<h2 id=\"11-Seedë¥¼-ìœ„í•œ-Entity-ì‘ì„±\" style=\"position:relative;\">1.1. Seedë¥¼ ìœ„í•œ Entity ì‘ì„±<a href=\"#11-Seed%EB%A5%BC-%EC%9C%84%ED%95%9C-Entity-%EC%9E%91%EC%84%B1\" aria-label=\"11 Seedë¥¼ ìœ„í•œ Entity ì‘ì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Entity</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">User</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Primary</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk11\">Column</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">email</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk11\">Column</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">password</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk11\">Column</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">nullable:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">phone_number</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">export</span><span class=\"mtk1\"> </span><span class=\"mtk12\">default</span><span class=\"mtk1\"> </span><span class=\"mtk12\">User</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>ê°„ëµí•˜ê²Œ ìƒì„±í•´ì£¼ì Entityë¥¼ ì‘ì„±í•´ì£¼ì.<br>\nì—¬ê¸°ì„œ ìƒëµí•œ ë¶€ë¶„ ( Entitiy ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™”, Ormê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë“±..)</p>\n<h2 id=\"12-Seed-Scriptë¡œ-ìƒì„±\" style=\"position:relative;\">1.2. Seed Scriptë¡œ ìƒì„±<a href=\"#12-Seed-Script%EB%A1%9C-%EC%83%9D%EC%84%B1\" aria-label=\"12 Seed Scriptë¡œ ìƒì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ts-node ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.<br>\n(ts-nodeëŠ” tscì™€ ë‹¤ë¥´ê²Œ javascriptë¡œ ì»´íŒŒì¼ í•˜ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰í•œë‹¤.)</p>\n<h3 id=\"121-ts-node-script-ì„¤ì •ë°©ë²•\" style=\"position:relative;\">1.2.1. ts-node script ì„¤ì •ë°©ë²•<a href=\"#121-ts-node-script-%EC%84%A4%EC%A0%95%EB%B0%A9%EB%B2%95\" aria-label=\"121 ts node script ì„¤ì •ë°©ë²• permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">npx typeorm migration:create</span></span></code></pre>\n<p>ts-nodeê¸°ì¤€ìœ¼ë¡œ ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ<br>\normConfig íŒŒì¼ì—ì„œ ì„¤ì •í•œ í´ë”ì— migrationíŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ë‹¤.</p>\n<p>ì´ìœ ë¥¼ ì‚´í´ë³´ë‹ˆ, typescriptì—ì„œ ì ˆëŒ€ê²½ë¡œë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì´ë‹¤.<br>\në”°ë¼ì„œ ì ˆëŒ€ê²½ë¡œë¥¼ í¬í•¨í•˜ì—¬ scriptë¥¼ ì‹¤í–‰í•´ì¤˜ì•¼ í•˜ê³ ,<br>\ntypeOrm ê³µì‹ë¬¸ì„œì—ì„œëŠ” node_modulesì— ì„¤ì¹˜ëœ clië¥¼ ì´ìš©í•˜ë¼ê³  ì í˜€ìˆë‹¤.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"json\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//package.json</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;migration:create&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;ts-node -r tsconfig-paths/register ../../node_modules/typeorm/cli.js migration:create -n $NAME&quot;</span></span></span></code></pre>\n<p>ë”°ë¼ì„œ ì•„ë˜ì˜ ì½”ë“œê°€ ì™„ì„±ë˜ëŠ”ë°,<br>\ní˜„ í”„ë¡œì íŠ¸ì—ì„œëŠ” monorepoë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì—, node_modulesì˜ ìœ„ì¹˜ê°€ tsconfigì˜ ìœ„ì¹˜ì™€ ë‹¤ë¥´ë‹¤.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">$NAME</span><span class=\"mtk1\">=í•˜ê³ ì‹¶ì€ì´ë¦„ yarn migration:create</span></span></span></code></pre>\n<p>ì„ í†µí•´ migration createì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<p>ì²˜ìŒ Seedë¥¼ ì„¤ì •í•  ë•Œ, ì™œ ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì´ migrationì„ ì´ìš©í• ê¹Œ? ë¼ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆë‹¤.<br>\nmigrationì„ ì‚¬ìš©í•˜ë©´</p>\n<ol>\n<li>seed ì½”ë“œë¥¼ ì‘ì„±í•´ë†“ìœ¼ë©´ ì¬ì‘ì„±ì˜ í•„ìš”ê°€ ì—†ë‹¤.</li>\n<li>rollbackì´ ìš©ì´í•˜ë‹¤.</li>\n</ol>\n<h2 id=\"13-Seed-ì‹¤í–‰-revert-script-ì‘ì„±\" style=\"position:relative;\">1.3. Seed ì‹¤í–‰, revert script ì‘ì„±<a href=\"#13-Seed-%EC%8B%A4%ED%96%89-revert-script-%EC%9E%91%EC%84%B1\" aria-label=\"13 Seed ì‹¤í–‰ revert script ì‘ì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"json\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//package.json</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;migration:run&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;ts-node -r tsconfig-paths/register ../../node_modules/typeorm/cli.js migration:run&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;migration:revert&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;ts-node -r tsconfig-paths/register ../../node_modules/typeorm/cli.js migration:revert&quot;</span><span class=\"mtk1\">,</span></span></span></code></pre>\n<p>ìœ„ì™€ ê°™ì€ ë…¼ë¦¬ë¡œ runê³¼ revertë¥¼ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.</p>\n<h1 id=\"2-Seed-ì½”ë“œ-ì‘ì„±\" style=\"position:relative;\">2. Seed ì½”ë“œ ì‘ì„±<a href=\"#2-Seed-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"2 Seed ì½”ë“œ ì‘ì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h2 id=\"21-Up-down\" style=\"position:relative;\">2.1. Up down<a href=\"#21-Up-down\" aria-label=\"21 Up down permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ìœ„ì—ì„œ ì„¤ì •í•œ createë¥¼ ì‹¤í–‰í•´ë³´ì.</p>\n<p>ê·¸ëŸ¼ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ìƒì„±ë  ê±°ë‹¤.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SeedUser1643011552762</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MigrationInterface</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk11\">up</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryRunner</span><span class=\"mtk1\">: </span><span class=\"mtk10\">QueryRunner</span><span class=\"mtk1\">): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">void</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk11\">down</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryRunner</span><span class=\"mtk1\">: </span><span class=\"mtk10\">QueryRunner</span><span class=\"mtk1\">): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">void</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">export</span><span class=\"mtk1\"> </span><span class=\"mtk12\">default</span><span class=\"mtk1\"> </span><span class=\"mtk12\">SeedUser1643011552762</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>upì€ migrationì„ runí• ë•Œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ê³ \ndownì€ migrationì„ revertí• ë•Œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ë‹¤.</p>\n<p>migrationì˜ í¸ë¦¬í•œ ì ì€ databaseì— keyê°’ì„ ê¸°ë¡í•˜ì—¬<br>\nmigrationì´ rollbackëëŠ”ì§€, runëëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<p>seedë¿ë§Œ ì•„ë‹ˆë¼, columnëª… ë³€ê²½ or ì¶”ê°€ ë“±ì— ìš©ì´í•˜ë‹¤.</p>\n<h2 id=\"22-seed-run-ì½”ë“œ-ì‘ì„±\" style=\"position:relative;\">2.2. seed run ì½”ë“œ ì‘ì„±<a href=\"#22-seed-run-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"22 seed run ì½”ë“œ ì‘ì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ê¸€ ë§¨ ìƒë‹¨ì—ì„œ ë¯¸êµ­ ìœ ëª… í”„ë¡œê·¸ë˜ë¨¸ Aaron Swartz ì–´ë””ê°??...ì„<br>\në¬¸ì œì‚¼ì•˜ë‹¤.</p>\n<p>ì´ìœ ëŠ” ì´ ì‚¬ëŒì´ ë§ì€ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì˜¤í”ˆí–ˆë‹¤ê°€ ê°‘ìê¸° ì–´ë–¤ ì´ìœ ì—ì„œì¸ì§€<br>\nì†ŒìŠ¤ê°€ ì „ë¶€ ë‚ ë ¸ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì´ ì‚¬ëŒì´ ë§Œë“¤ì–´ì¤€ fakerë¼ëŠ” npm moduleì„ ì‚¬ìš©í•˜ë ¤ë‹¤ ì—†ì–´ì ¸ì„œ ë†€ëë‹¤.<br>\nfakerëŠ” ìë™ìœ¼ë¡œ dummydataë¥¼ ìƒì„±í•´ì£¼ëŠ” íˆ´ì´ë‹¤.</p>\n<p>ëŒ€ì•ˆìœ¼ë¡œ casualì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SeedUser1643011552762</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MigrationInterface</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk11\">up</span><span class=\"mtk1\">(): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">void</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">: {}[] = [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">100</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">test</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">email:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">casual</span><span class=\"mtk1\">.</span><span class=\"mtk12\">email</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">password:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">casual</span><span class=\"mtk1\">.</span><span class=\"mtk12\">password</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">phone_number:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">casual</span><span class=\"mtk1\">.</span><span class=\"mtk12\">phone</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">value</span><span class=\"mtk1\">.</span><span class=\"mtk11\">push</span><span class=\"mtk1\">(</span><span class=\"mtk12\">test</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">value</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> === </span><span class=\"mtk7\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">return</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getConnection</span><span class=\"mtk1\">().</span><span class=\"mtk11\">createQueryBuilder</span><span class=\"mtk1\">().</span><span class=\"mtk11\">insert</span><span class=\"mtk1\">().</span><span class=\"mtk11\">into</span><span class=\"mtk1\">(</span><span class=\"mtk12\">User</span><span class=\"mtk1\">).</span><span class=\"mtk11\">values</span><span class=\"mtk1\">(</span><span class=\"mtk12\">value</span><span class=\"mtk1\">).</span><span class=\"mtk11\">execute</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>npmê°€ì´ë“œëŒ€ë¡œ casual.ì›í•˜ëŠ”ê°’ ì„ í•´ì£¼ë©´<br>\nëœë¤í•˜ê²Œ ê°’ì„ ì¶œë ¥í•´ì¤€ë‹¤.<br>\nemail,password,phoneì™¸ì—ë„ ë‹¤ì–‘í•œ dummydataí˜•ì‹ì„ ì§€ì›í•œë‹¤.</p>\n<p>ì½”ë“œëŠ” ì•„ì£¼ ê°„ë‹¨í•˜ë‹¤.<br>\n100ê°œì˜ ë”ë¯¸ë°ì´í„°ë¥¼ User Entityì— ë„£ì–´ì£¼ëŠ” ê²ƒì´ë‹¤.</p>\n<h2 id=\"23-seed-revert-ì½”ë“œ-ì‘ì„±\" style=\"position:relative;\">2.3. seed revert ì½”ë“œ ì‘ì„±<a href=\"#23-seed-revert-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"23 seed revert ì½”ë“œ ì‘ì„± permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>ë¡¤ë°± ì½”ë“œë„ ì‘ì„±í•´ë³´ì.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SeedUser1643011552762</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MigrationInterface</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk11\">down</span><span class=\"mtk1\">(</span><span class=\"mtk12\">queryRunner</span><span class=\"mtk1\">: </span><span class=\"mtk10\">QueryRunner</span><span class=\"mtk1\">): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">void</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryRunner</span><span class=\"mtk1\">.</span><span class=\"mtk11\">query</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`truncate table public.user cascade;`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>psqlì„ ì‚¬ìš©í•˜ëŠ”ë°, truncateë¥¼ ì´ìš©í•˜ì—¬ row ë°ì´í„°ë¥¼ ëª¨ë‘ ë‚ ë¦¬ëŠ” ì¿¼ë¦¬ë‹¤.</p>\n<p>ì €ì¥í•œ ë’¤</p>\n<h1 id=\"3-Seeding-í•˜ê¸°\" style=\"position:relative;\">3. Seeding í•˜ê¸°<a href=\"#3-Seeding-%ED%95%98%EA%B8%B0\" aria-label=\"3 Seeding í•˜ê¸° permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>ìœ„ì—ì„œ ì‘ì„±í•´ì¤€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ì£¼ë©´ ëœë‹¤.</p>\n<h1 id=\"4-ë§ˆì¹˜ë©°\" style=\"position:relative;\">4. ë§ˆì¹˜ë©°<a href=\"#4-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"4 ë§ˆì¹˜ë©° permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>ì‹¤ì œë¡œ ë²„ì „ê´€ë¦¬ê°€ í•„ìš”í•œ migrationê³¼<br>\nlocalì—ì„œ testìš©ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” dummyìš© migration seedingì€ í´ë”ë¥¼ ë‚˜ëˆ <br>\nê´€ë¦¬í•  í•„ìš”ê°€ ìˆê² ë‹¤.</p>\n<p>packageë¥¼ ì˜¤í”ˆì†ŒìŠ¤ë¡œ í’€ì–´ì£¼ëŠ” ì‚¬ëŒë“¤ì—ê²Œ<br>\ní•­ìƒ ê°ì‚¬í•¨ì„ ëŠë‚€ë‹¤.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","featuredImg":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkklEQVQoz6WSsQrFIAxF3Z9IgzHR2SXfIO3kh3QsfojQtUPBz33gW1uwfWcN53JJotwfqLsBEb2UEREAiIg7d0Hq0vTei4gx5tMBgCGZmbXW8zyf57ltWyllXdeU0q/IkLwsy3Ec+77XWltrOWetNTMP1Q4hiIi1NsbovSciRHywsGmanHMAcKkNnYo6j+WRJ/kCd789DA6TsQMAAAAASUVORK5CYII=","aspectRatio":2,"src":"/static/d69521d8ac0792af6e325f6833bbca06/17c4b/R1280x0.png","srcSet":"/static/d69521d8ac0792af6e325f6833bbca06/69585/R1280x0.png 200w,\n/static/d69521d8ac0792af6e325f6833bbca06/497c6/R1280x0.png 400w,\n/static/d69521d8ac0792af6e325f6833bbca06/17c4b/R1280x0.png 743w","sizes":"(max-width: 743px) 100vw, 743px"}}},"frontmatter":{"date":"January 25, 2022","subtitle":"Relax(01)","title":"typeOrm seeding"},"headings":[{"depth":1,"id":"1-TypeOrmì—ì„œ-seed-ì •ì±…-ìˆ˜ë¦½","value":"1. TypeOrmì—ì„œ seed ì •ì±… ìˆ˜ë¦½"},{"depth":2,"id":"11-Seedë¥¼-ìœ„í•œ-Entity-ì‘ì„±","value":"1.1. Seedë¥¼ ìœ„í•œ Entity ì‘ì„±"},{"depth":2,"id":"12-Seed-Scriptë¡œ-ìƒì„±","value":"1.2. Seed Scriptë¡œ ìƒì„±"},{"depth":3,"id":"121-ts-node-script-ì„¤ì •ë°©ë²•","value":"1.2.1. ts-node script ì„¤ì •ë°©ë²•"},{"depth":2,"id":"13-Seed-ì‹¤í–‰-revert-script-ì‘ì„±","value":"1.3. Seed ì‹¤í–‰, revert script ì‘ì„±"},{"depth":1,"id":"2-Seed-ì½”ë“œ-ì‘ì„±","value":"2. Seed ì½”ë“œ ì‘ì„±"},{"depth":2,"id":"21-Up-down","value":"2.1. Up down"},{"depth":2,"id":"22-seed-run-ì½”ë“œ-ì‘ì„±","value":"2.2. seed run ì½”ë“œ ì‘ì„±"},{"depth":2,"id":"23-seed-revert-ì½”ë“œ-ì‘ì„±","value":"2.3. seed revert ì½”ë“œ ì‘ì„±"},{"depth":1,"id":"3-Seeding-í•˜ê¸°","value":"3. Seeding í•˜ê¸°"},{"depth":1,"id":"4-ë§ˆì¹˜ë©°","value":"4. ë§ˆì¹˜ë©°"}]}},"pageContext":{"slug":"/Development/relax01/"}},"staticQueryHashes":[]}